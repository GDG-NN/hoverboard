<link rel="import" href="../bower_components/polymer-redux/polymer-redux.html">
<script src="/node_modules/redux/dist/redux.min.js"></script>

<script src="redux/constants.js" type="text/javascript"></script>
<script src="redux/actions.js" type="text/javascript"></script>
<script src="redux/reducer.js" type="text/javascript"></script>

<script>
  const initialState = {
    ui: {
      isDrawerOpened: false
    },
    route: 'home',
    heroSettings: {$ heroSettings | dump | safe $}
  };

  const appReducer = (state, action) => {
    if (!state) return initialState;
    return {
      ui: uiReducer(state.ui, action)
      case 'SET_ROUTE':
        const { route } = action;
        return Object.assign({}, state, { route });
    };
  };

  const store = Redux.createStore(
    appReducer,
    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()
  );
  const ReduxMixin = PolymerRedux(store);

  const uiActions = {
    toggleDrawer: (value = null) => {
      store.dispatch({
        type: 'TOGGLE_DRAWER',
        value
      });
    }
  };

  const routeActions = {
    setRoute: route => {
      store.dispatch({
        type: 'SET_ROUTE',
        route
      });
    }
  }
</script>
